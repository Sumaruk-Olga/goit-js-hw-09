{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,uBAC9BE,KAAKH,SAASC,cAAc,sBAC5BG,OAAOJ,SAASC,cAAc,yBA6EhC,SAASI,EAAcC,EAAUJ,GAC/B,MAAMK,EAAgBC,KAAKC,SAAW,GAChCC,EAAS,UAAEJ,QAAUJ,GAC3B,OAAO,IAAIS,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACLP,EACJK,EAAQF,GAERG,EAAOH,KAENR,OA3BP,WACI,MAAMa,EAAYC,aAAaC,QAnEP,6BAoExB,IAAIC,EAEAH,GACAG,EAAkBC,KAAKC,MAAML,GAEjCjB,EAAKI,MAAMmB,MAAQH,EAAgBhB,OAAS,GAC5CJ,EAAKK,KAAKkB,MAAQH,EAAgBf,MAAQ,GAC1CL,EAAKM,OAAOiB,MAAQH,EAAgBd,QAAU,IAE1Cc,EAAkB,GApE1BI,GAEAxB,EAAKC,KAAKwB,iBAAiB,UAI3B,SAAsBC,GAItB,GAFEA,EAAMC,iBAEiB,KAArB3B,EAAKI,MAAMmB,OAAkC,KAAlBvB,EAAKK,KAAKkB,OAAkC,KAApBvB,EAAKM,OAAOiB,MAE3D,YADAK,MAAM,8BAIZ,MAAMX,EAAYC,aAAaC,QAxBL,6BAyBpBC,EAAkBC,KAAKC,MAAML,GAE7BY,EAAQC,OAAOV,EAAgBhB,OAC/BC,EAAOyB,OAAOV,EAAgBf,MAC9BC,EAASwB,OAAOV,EAAgBd,QAEtC,IAAK,IAAIyB,EAAI,EAAGA,GAAIzB,EAAQyB,GAAK,EAE/BxB,EAAcwB,EAAIF,EAAQE,EAAE1B,GAAO2B,MAAK,EAACxB,SAAEA,EAAQJ,MAAEA,MACjD6B,EAAAnC,GAASoC,OAAOC,QAAQ,qBAAqB3B,QAAeJ,UAC/DgC,OAAM,EAAC5B,SAAEA,EAAQJ,MAAEA,MACpB6B,EAAAnC,GAASoC,OAAOG,QAAQ,oBAAoB7B,QAAeJ,UAK3Dc,aAAaoB,WAzCW,6BA0CxBtC,EAAKC,KAAKsC,WA9BdvC,EAAKC,KAAKwB,iBAAiB,SAkC3B,SAAuBC,GACrB,MAAMT,EAAYC,aAAaC,QA/CL,6BAgDxB,IAAIC,EAGAA,EADAH,EACkBI,KAAKC,MAAML,GAGX,GAGxBG,EAAgBM,EAAMc,OAAOC,MAAQf,EAAMc,OAAOjB,MAElDvB,EAAKI,MAAMmB,MAAQH,EAAgBhB,OAAS,GAC5CJ,EAAKK,KAAKkB,MAAQH,EAAgBf,MAAQ,GAC1CL,EAAKM,OAAOiB,MAAQH,EAAgBd,QAAU,GAE9CY,aAAawB,QA/Da,4BA+DgBrB,KAAKsB,UAAUvB","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst KEY_TO_LOCALSTORAGE = \"form-data-create-promises\";\n\nconst refs = {\n  form: document.querySelector('.form'),\n  delay: document.querySelector('input[name=\"delay\"]'),\n  step:document.querySelector('input[name=\"step\"]'),\n  amount:document.querySelector('input[name=\"amount\"]'),\n};\n\ninitPage();\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.form.addEventListener('input', onInputChange);\n\n\nfunction onFormSubmit(event) {\n\n  event.preventDefault();\n\nif (refs.delay.value === \"\" || refs.step.value===\"\" || refs.amount.value===\"\") {\n        alert('Please fill in all fields!');\n        return;\n    };\n\n  const savedData = localStorage.getItem(KEY_TO_LOCALSTORAGE);\n  const parsedSavedData = JSON.parse(savedData);\n    // console.log('savedData', savedData);\n  const delay = Number(parsedSavedData.delay);\n  const step = Number(parsedSavedData.step);\n  const amount = Number(parsedSavedData.amount);\n\n  for (let i = 1; i <=amount; i += 1){  \n    \n    createPromise(i, (delay + i*step)).then(({ position, delay }) => {\n        Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`);    \n  }).catch(({ position, delay }) => {\n    Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`);    \n  });   \n    \n  }\n   \n    localStorage.removeItem(KEY_TO_LOCALSTORAGE);\n    refs.form.reset();    \n}\n\n\nfunction onInputChange(event) {\n  const savedData = localStorage.getItem(KEY_TO_LOCALSTORAGE);\n    let parsedSavedData;\n    // console.log('savedData', savedData);\n    if (savedData) {\n        parsedSavedData = JSON.parse(savedData);\n        \n    } else {\n        parsedSavedData = {};\n    }\n    \n  parsedSavedData[event.target.name] = event.target.value;\n\n  refs.delay.value = parsedSavedData.delay || \"\";\n  refs.step.value = parsedSavedData.step || \"\";\n  refs.amount.value = parsedSavedData.amount || \"\";\n     \n  localStorage.setItem(KEY_TO_LOCALSTORAGE, JSON.stringify(parsedSavedData));\n}\n\nfunction initPage() {\n    const savedData = localStorage.getItem(KEY_TO_LOCALSTORAGE);\n    let parsedSavedData;\n    // console.log('savedData', savedData);\n    if (savedData) {\n        parsedSavedData = JSON.parse(savedData);        \n   \n    refs.delay.value = parsedSavedData.delay || \"\";\n    refs.step.value = parsedSavedData.step || \"\";\n    refs.amount.value = parsedSavedData.amount || \"\";\n    } else {\n        parsedSavedData = {};\n    }\n    // console.log('parsedSavedData', parsedSavedData);\n}\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  const result = { position, delay };\n  return new Promise((resolve, reject) => { \n    setTimeout(() => { \n      if (shouldResolve) {\n      resolve(result);\n    } else {\n      reject(result);\n    }\n    }, delay);\n  });\n\n}\n\n\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$refs","form","document","querySelector","delay","step","amount","$47d4ff9957288465$var$createPromise","position","shouldResolve","Math","random","result","Promise","resolve","reject","setTimeout","savedData","localStorage","getItem","parsedSavedData","JSON","parse","value","$47d4ff9957288465$var$initPage","addEventListener","event","preventDefault","alert","delay1","Number","i","then","$parcel$interopDefault","Notify","success","catch","failure","removeItem","reset","target","name","setItem","stringify"],"version":3,"file":"03-promises.bf3a3b72.js.map"}